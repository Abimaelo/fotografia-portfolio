<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci贸n - CMS</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* OAuth Simple Modal */
        .oauth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 26, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .oauth-modal {
            background: var(--color-white);
            padding: 3rem;
            border-radius: 8px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .oauth-modal h2 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 1.5rem;
            color: var(--color-black);
        }

        .oauth-modal p {
            margin-bottom: 2rem;
            color: var(--color-dark-gray);
        }

        .github-login-btn {
            background: #24292e;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }

        .github-login-btn:hover {
            background: #1b1f24;
        }

        .github-login-btn svg {
            width: 20px;
            height: 20px;
        }

        .oauth-hidden {
            display: none !important;
        }

        .admin-content {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .admin-content.authenticated {
            opacity: 1;
        }

        .error-message {
            color: var(--error-color);
            margin-top: 1rem;
            font-size: 0.9rem;
        }
    </style>
    <style>
        /* Variables CSS para el admin - compatibles con el dise帽o monocrom谩tico */
        :root {
            /* Monochromatic Color Palette */
            --color-white: #ffffff;
            --color-off-white: #fafafa;
            --color-light-gray: #f5f5f5;
            --color-medium-gray: #999999;
            --color-dark-gray: #666666;
            --color-black: #1a1a1a;
            --color-true-black: #000000;
            
            /* Admin specific colors (for compatibility) */
            --primary-color: var(--color-black);
            --primary-hover: var(--color-dark-gray);
            --secondary-color: var(--color-medium-gray);
            --text-color: var(--color-black);
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --success-color: #28a745;
            --error-color: #dc3545;
            --info-color: #17a2b8;
        }
        
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            font-family: 'Inter', sans-serif;
            background: var(--color-off-white);
            min-height: 100vh;
        }
        
        .admin-header {
            background: var(--color-black);
            color: var(--color-white);
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
        }
        
        .admin-header h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 400;
            margin: 0;
            font-size: 1.8rem;
            letter-spacing: -0.01em;
        }
        
        .admin-nav {
            background: var(--color-white);
            padding: 1.5rem;
            border-radius: 4px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            border: 1px solid var(--color-light-gray);
        }
        
        .admin-nav ul {
            display: flex;
            list-style: none;
            gap: 1rem;
            margin: 0;
            padding: 0;
            flex-wrap: wrap;
        }
        
        .admin-nav button {
            background: none;
            border: none;
            color: var(--color-dark-gray);
            font-family: 'DM Sans', sans-serif;
            font-weight: 400;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-radius: 2px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .admin-nav button:hover,
        .admin-nav button.active {
            background: var(--color-black);
            color: var(--color-white);
        }
        
        .admin-section {
            background: var(--color-white);
            padding: 2.5rem;
            border-radius: 4px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            display: none;
            border: 1px solid var(--color-light-gray);
        }
        
        .admin-section.active {
            display: block;
        }
        
        .admin-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: var(--color-black);
            letter-spacing: -0.01em;
        }
        
        .form-group {
            margin-bottom: 2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.75rem;
            font-family: 'DM Sans', sans-serif;
            font-weight: 400;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-dark-gray);
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid var(--color-light-gray);
            border-radius: 2px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            background: var(--color-white);
            color: var(--color-black);
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-black);
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .service-item,
        .blog-item {
            background: var(--color-off-white);
            padding: 2rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            position: relative;
            border: 1px solid var(--color-light-gray);
        }
        
        .portfolio-item {
            background: var(--color-off-white);
            padding: 2rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            position: relative;
            border: 1px solid var(--color-light-gray);
        }
        
        .remove-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--error-color);
            color: var(--color-white);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.8rem;
            font-family: 'DM Sans', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
        }
        
        .remove-btn:hover {
            background: #c82333;
            transform: translateY(-1px);
        }
        
        .add-btn {
            background: var(--color-black);
            color: var(--color-white);
            border: 1px solid var(--color-black);
            padding: 1rem 2rem;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.9rem;
            font-family: 'DM Sans', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }
        
        .add-btn:hover {
            background: transparent;
            color: var(--color-black);
            transform: translateY(-2px);
        }
        
        .save-btn {
            background: var(--color-white);
            color: var(--color-black);
            border: 2px solid var(--color-black);
            padding: 1.25rem 2.5rem;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.9rem;
            font-family: 'DM Sans', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-top: 3rem;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            background: var(--color-black);
            color: var(--color-white);
            transform: translateY(-2px);
        }
        
        .save-btn:disabled {
            background: var(--color-medium-gray);
            color: var(--color-light-gray);
            border-color: var(--color-medium-gray);
            cursor: not-allowed;
            transform: none;
        }
        
        /* Social Media Toggles */
        .social-controls {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--color-off-white);
            border-radius: 4px;
            border: 1px solid var(--color-light-gray);
        }
        
        .social-controls h3 {
            margin: 0 0 1rem 0;
            color: var(--color-black);
            font-size: 1.1rem;
        }
        
        .social-toggles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .toggle-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            font-size: 0.95rem;
            color: var(--color-dark-gray);
            padding: 0.75rem;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        
        .toggle-label:hover {
            background: var(--color-white);
        }
        
        .toggle-label input[type="checkbox"] {
            display: none;
        }
        
        .toggle-slider {
            position: relative;
            width: 44px;
            height: 24px;
            background: var(--color-medium-gray);
            border-radius: 12px;
            transition: background-color 0.3s ease;
        }
        
        .toggle-slider::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: var(--color-white);
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-label input[type="checkbox"]:checked + .toggle-slider {
            background: var(--color-black);
        }
        
        .toggle-label input[type="checkbox"]:checked + .toggle-slider::before {
            transform: translateX(20px);
        }
        
        .social-urls h3 {
            margin: 0 0 1rem 0;
            color: var(--color-black);
            font-size: 1.1rem;
        }
        }
        
        .status-message {
            padding: 1rem 1.5rem;
            border-radius: 2px;
            margin-bottom: 2rem;
            display: none;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .status-message.success {
            background: rgba(40, 167, 69, 0.1);
            color: #155724;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        
        .status-message.error {
            background: rgba(220, 53, 69, 0.1);
            color: #721c24;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        
        .status-message.info {
            background: rgba(23, 162, 184, 0.1);
            color: #0c5460;
            border: 1px solid rgba(23, 162, 184, 0.3);
        }
        
        .preview-links {
            margin-top: 1rem;
        }
        
        .preview-link {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 1rem 2rem;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.3s ease;
            margin-bottom: 1rem;
        }
        
        .preview-link:hover {
            background: var(--color-dark-gray);
        }
        
        .preview-note {
            font-size: 0.9rem;
            color: var(--color-medium-gray);
            margin-top: 0.5rem;
        }
        
        /* Image upload styles */
        .image-upload-container,
        .gallery-upload-container {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .image-upload-container input,
        .gallery-upload-container textarea {
            flex: 1;
        }
        
        .upload-btn {
            background: var(--color-light-gray);
            color: var(--color-dark-gray);
            border: 1px solid var(--color-medium-gray);
            padding: 0.75rem 1.5rem;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.8rem;
            font-family: 'DM Sans', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            white-space: nowrap;
            margin-top: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .upload-btn:hover {
            background: var(--color-medium-gray);
            color: var(--color-white);
            transform: translateY(-1px);
        }
        
        .image-preview,
        .gallery-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .image-preview img,
        .gallery-preview img {
            border-radius: 2px;
            border: 1px solid var(--color-light-gray);
            transition: all 0.3s ease;
            max-width: 120px;
            height: auto;
        }
        
        .image-preview img:hover,
        .gallery-preview img:hover {
            border-color: var(--color-black);
            transform: scale(1.05);
        }
        
        .status-message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .gallery-upload-container {
            flex-direction: column;
        }
        
        .gallery-upload-container textarea {
            margin-bottom: 10px;
        }

        /* Two column layout for form fields */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* Responsive design for admin panel */
        @media (max-width: 1024px) {
            .two-column {
                gap: 1.5rem;
            }
        }
        
        @media (max-width: 768px) {
            .admin-container {
                padding: 1rem;
            }
            
            .admin-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .admin-header h1 {
                font-size: 1.5rem;
            }
            
            .admin-section {
                padding: 1.5rem;
            }
            
            .admin-section h2 {
                font-size: 1.5rem;
            }
            
            .two-column {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .admin-nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .admin-nav button {
                width: 100%;
                text-align: left;
            }
            
            .image-upload-container {
                flex-direction: column;
            }
            
            .upload-btn {
                width: 100%;
                margin-top: 0.75rem;
            }
            
            .service-item,
            .blog-item,
            .portfolio-item {
                padding: 1.5rem;
            }
            
            .remove-btn {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .admin-nav {
                padding: 1rem;
            }
            
            .admin-section {
                padding: 1rem;
            }
        }
        
        .images-array {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            background: var(--color-light-gray);
            padding: 0.75rem;
            border-radius: 2px;
            border: 1px solid var(--color-light-gray);
        }
    </style>
</head>
<body>
    <!-- OAuth Simple Login Modal -->
    <div id="oauth-overlay" class="oauth-overlay">
        <div class="oauth-modal">
            <h2>Panel de Administraci贸n</h2>
            <p>Debes iniciar sesi贸n con GitHub para acceder al panel de administraci贸n</p>
            <a href="#" id="github-login-btn" class="github-login-btn">
                <svg viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                Iniciar Sesi贸n con GitHub
            </a>
            <div id="oauth-error" class="error-message" style="display: none;"></div>
        </div>
    </div>

    <div class="admin-container admin-content">
        <div class="admin-header admin-content">
            <h1>Panel de Administraci贸n CMS</h1>
            <a href="index.html" style="color: white; text-decoration: none;">Ver Sitio</a>
        </div>
        
        <div class="admin-nav admin-content">
            <ul>
                <li><button onclick="showSection('general')" class="active">Configuraci贸n General</button></li>
                <li><button onclick="showSection('photographer')">Sobre el Fot贸grafo</button></li>
                <li><button onclick="showSection('hero')">Hero Section</button></li>
                <li><button onclick="showSection('social')">Redes Sociales</button></li>
                <li><button onclick="showSection('services')">Servicios</button></li>
                <li><button onclick="showSection('portfolio')">Portfolio</button></li>
                <li><button onclick="showSection('blog')">Blog</button></li>
                <li><button onclick="showSection('contact')">Contacto</button></li>
                <li><button onclick="showSection('preview')">Vista Previa</button></li>
            </ul>
        </div>
        
        <div id="status-message" class="status-message"></div>
        
        <!-- General Settings -->
        <div id="general" class="admin-section active admin-content">
            <h2>Configuraci贸n General</h2>
            <div class="form-group">
                <label for="site-title-input">T铆tulo del Sitio</label>
                <input type="text" id="site-title-input" placeholder="Mi Sitio Web">
            </div>
            <div class="form-group">
                <label for="copyright-input">Texto de Copyright</label>
                <input type="text" id="copyright-input" placeholder="漏 2025 Mi Sitio Web. Todos los derechos reservados.">
            </div>
            <div class="form-group">
                <label for="footer-title-input">T铆tulo en el Footer</label>
                <input type="text" id="footer-title-input" placeholder="Mi Sitio Web">
            </div>
        </div>
        
        <!-- Photographer Info -->
        <div id="photographer" class="admin-section admin-content">
            <h2>Informaci贸n del Fot贸grafo</h2>
            <div class="form-group">
                <label for="photographer-name-input">Nombre del Fot贸grafo</label>
                <input type="text" id="photographer-name-input" placeholder="Carlos Mart铆nez">
            </div>
            <div class="form-group">
                <label for="photographer-specialty-input">Especialidad</label>
                <input type="text" id="photographer-specialty-input" placeholder="Fotograf铆a de Retratos y Eventos">
            </div>
            <div class="form-group">
                <label for="photographer-experience-input">Experiencia</label>
                <input type="text" id="photographer-experience-input" placeholder="8 a帽os de experiencia">
            </div>
            <div class="form-group">
                <label for="photographer-bio-input">Biograf铆a del Fot贸grafo</label>
                <textarea id="photographer-bio-input" rows="6" placeholder="Escribe aqu铆 tu biograf铆a profesional..."></textarea>
            </div>
            <div class="form-group">
                <label for="photographer-image-input">Foto del Fot贸grafo</label>
                <div class="image-upload-container">
                    <input type="text" id="photographer-image-input" placeholder="URL de la imagen o usa el bot贸n de carga">
                    <button type="button" class="upload-btn" onclick="uploadPhotographerImage()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="17 8 12 3 7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Cargar Imagen
                    </button>
                </div>
                <div id="photographer-image-preview" class="image-preview"></div>
            </div>
        </div>

        <!-- Hero Section -->
        <div id="hero" class="admin-section admin-content">
            <h2>Hero Section</h2>
            <div class="form-group">
                <label for="hero-title-input">T铆tulo Principal</label>
                <input type="text" id="hero-title-input" placeholder="Bienvenido a Mi Sitio">
            </div>
            <div class="form-group">
                <label for="hero-subtitle-input">Subt铆tulo</label>
                <input type="text" id="hero-subtitle-input" placeholder="Soluciones digitales modernas">
            </div>
            <div class="form-group">
                <label for="hero-cta-input">Texto del Bot贸n</label>
                <input type="text" id="hero-cta-input" placeholder="Conoce M谩s">
            </div>
            <div class="form-group">
                <label>Imagen de Fondo del Hero</label>
                <div class="image-upload-container">
                    <input type="url" id="hero-image-input" placeholder="https://ejemplo.com/imagen-hero.jpg">
                    <button type="button" class="upload-btn" onclick="uploadHeroImage()"> Subir Imagen Hero</button>
                    <div class="image-preview" id="hero-image-preview"></div>
                </div>
            </div>
        </div>
        
        <!-- Services Section -->
        <div id="services" class="admin-section admin-content">
            <h2>Servicios</h2>
            <div id="services-container">
                <!-- Services will be dynamically added here -->
            </div>
            <button class="add-btn" onclick="addService()">+ Agregar Servicio</button>
        </div>
        
        <!-- Portfolio Section -->
        <div id="portfolio" class="admin-section admin-content">
            <h2>Portfolio</h2>
            <div id="portfolio-container">
                <!-- Portfolio items will be dynamically added here -->
            </div>
            <button class="add-btn" onclick="addPortfolioItem()">+ Agregar Proyecto</button>
        </div>
        
        <!-- Blog Section -->
        <div id="blog" class="admin-section admin-content">
            <h2>Posts del Blog</h2>
            <div id="blog-container">
                <!-- Blog posts will be dynamically added here -->
            </div>
            <button class="add-btn" onclick="addBlogPost()">+ Agregar Post</button>
        </div>
        
        <!-- Social Media Section -->
        <div id="social" class="admin-section admin-content">
            <h2>Redes Sociales</h2>
            <div class="social-controls">
                <h3>Mostrar/Ocultar Redes Sociales</h3>
                <div class="social-toggles">
                    <label class="toggle-label">
                        <input type="checkbox" id="show-instagram" checked>
                        <span class="toggle-slider"></span>
                        Mostrar Instagram
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-facebook" checked>
                        <span class="toggle-slider"></span>
                        Mostrar Facebook
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-twitter">
                        <span class="toggle-slider"></span>
                        Mostrar Twitter
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-linkedin" checked>
                        <span class="toggle-slider"></span>
                        Mostrar LinkedIn
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-website">
                        <span class="toggle-slider"></span>
                        Mostrar Sitio Web
                    </label>
                </div>
            </div>
            <div class="social-urls">
                <h3>URLs de Redes Sociales</h3>
                <div class="two-column">
                    <div class="form-group">
                        <label for="instagram-input">Instagram URL</label>
                        <input type="url" id="instagram-input" placeholder="https://instagram.com/tu_usuario">
                    </div>
                    <div class="form-group">
                        <label for="facebook-input">Facebook URL</label>
                        <input type="url" id="facebook-input" placeholder="https://facebook.com/tu_pagina">
                    </div>
                    <div class="form-group">
                        <label for="twitter-input">Twitter URL</label>
                        <input type="url" id="twitter-input" placeholder="https://twitter.com/tu_usuario">
                    </div>
                    <div class="form-group">
                        <label for="linkedin-input">LinkedIn URL</label>
                        <input type="url" id="linkedin-input" placeholder="https://linkedin.com/in/tu_perfil">
                    </div>
                    <div class="form-group">
                        <label for="website-input">Sitio Web Personal URL</label>
                        <input type="url" id="website-input" placeholder="https://tuweb.com">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contact Section -->
        <div id="contact" class="admin-section admin-content">
            <h2>Informaci贸n de Contacto</h2>
            <div class="two-column">
                <div class="form-group">
                    <label for="contact-email-input">Email</label>
                    <input type="email" id="contact-email-input" placeholder="info@misitio.com">
                </div>
                <div class="form-group">
                    <label for="contact-phone-input">Tel茅fono</label>
                    <input type="text" id="contact-phone-input" placeholder="+123456789">
                </div>
            </div>
            <div class="two-column">
                <div class="form-group">
                    <label for="contact-address-input">Direcci贸n</label>
                    <input type="text" id="contact-address-input" placeholder="Calle Principal 123, Ciudad">
                </div>
                <div class="form-group">
                    <label for="contact-studio-input">Descripci贸n del Estudio</label>
                    <input type="text" id="contact-studio-input" placeholder="Estudio fotogr谩fico con iluminaci贸n profesional">
                </div>
            </div>
            <div class="form-group">
                <label for="contact-availability-input">Horario de Atenci贸n</label>
                <input type="text" id="contact-availability-input" placeholder="Lunes a Viernes - 9:00 a 18:00">
            </div>
        </div>
        
        <!-- Preview Section -->
        <div id="preview" class="admin-section admin-content">
            <h2>Vista Previa</h2>
            <p>Abre tu sitio web para ver los cambios en tiempo real:</p>
            <div class="preview-links">
                <a id="site-preview-link" href="index.html" target="_blank" class="preview-link">
                     Abrir Sitio Web
                </a>
                <p class="preview-note">
                    <em>Nota: Los cambios se reflejar谩n despu茅s de guardar y refrescar esta p谩gina.</em>
                </p>
            </div>
        </div>
        
        <button class="save-btn" onclick="saveChanges()"> Guardar Cambios</button>
    </div>

    <script>
        // OAuth Simple Authentication System
        const CLIENT_ID = 'Iv1.28a35f7e35d16b5d'; // GitHub OAuth App Client ID
        const REDIRECT_URI = window.location.origin + '/admin.html'; // Redirect to admin
        
        // Check if user is authenticated on page load
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('github_token');
            if (token && validateToken(token)) {
                showAdminPanel();
            } else {
                showLoginModal();
            }
        });

        // GitHub OAuth login
        document.getElementById('github-login-btn').addEventListener('click', (e) => {
            e.preventDefault();
            const state = Math.random().toString(36).substring(7);
            localStorage.setItem('oauth_state', state);
            
            const authUrl = `https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&scope=repo&state=${state}`;
            window.location.href = authUrl;
        });

        // Handle OAuth callback
        function handleOAuthCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const state = urlParams.get('state');
            
            if (code && state === localStorage.getItem('oauth_state')) {
                exchangeCodeForToken(code);
            }
        }

        // Exchange authorization code for access token
        async function exchangeCodeForToken(code) {
            try {
                // For demonstration, we'll use a simple token validation
                // In production, this should be done on the server side
                const fakeToken = `ghp_${Math.random().toString(36).substring(2, 15)}_${Math.random().toString(36).substring(2, 15)}`;
                localStorage.setItem('github_token', fakeToken);
                
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
                
                showAdminPanel();
            } catch (error) {
                showError('Error al iniciar sesi贸n. Int茅ntalo de nuevo.');
            }
        }

        // Validate GitHub token
        async function validateToken(token) {
            try {
                // Basic token validation
                // In production, verify with GitHub API
                return token && token.startsWith('ghp_');
            } catch (error) {
                return false;
            }
        }

        // Show login modal
        function showLoginModal() {
            document.getElementById('oauth-overlay').classList.remove('oauth-hidden');
            document.querySelectorAll('.admin-content').forEach(el => {
                el.classList.remove('authenticated');
            });
        }

        // Show admin panel after authentication
        function showAdminPanel() {
            document.getElementById('oauth-overlay').classList.add('oauth-hidden');
            document.querySelectorAll('.admin-content').forEach(el => {
                el.classList.add('authenticated');
            });
        }

        // Show error message
        function showError(message) {
            const errorDiv = document.getElementById('oauth-error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Get authentication token for API calls
        function getAuthToken() {
            return localStorage.getItem('github_token');
        }

        // Logout function
        function logout() {
            localStorage.removeItem('github_token');
            showLoginModal();
        }

        // Check for OAuth callback on page load
        handleOAuthCallback();
    </script>

    <script>
        let siteData = {};
        let currentSection = 'general';

        // Load data on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await loadData();
            populateForms();
        });

        // Navigation between sections
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.admin-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            currentSection = sectionName;
        }

        // Load data from JSON
        async function loadData() {
            try {
                const response = await fetch('data.json');
                siteData = await response.json();
            } catch (error) {
                console.error('Error loading data:', error);
                showStatus('Error cargando los datos', 'error');
            }
        }

        // Populate forms with current data
        function populateForms() {
            // General settings
            document.getElementById('site-title-input').value = siteData.siteTitle || '';
            document.getElementById('footer-title-input').value = siteData.siteTitle || '';
            document.getElementById('copyright-input').value = siteData.meta?.copyright || '';
            
            // Photographer info
            document.getElementById('photographer-name-input').value = siteData.photographer?.name || '';
            document.getElementById('photographer-specialty-input').value = siteData.photographer?.specialty || '';
            document.getElementById('photographer-experience-input').value = siteData.photographer?.experience || '';
            document.getElementById('photographer-bio-input').value = siteData.photographer?.bio || '';
            document.getElementById('photographer-image-input').value = siteData.photographer?.image || '';
            
            // Hero section
            document.getElementById('hero-title-input').value = siteData.hero?.title || '';
            document.getElementById('hero-subtitle-input').value = siteData.hero?.subtitle || '';
            document.getElementById('hero-cta-input').value = siteData.hero?.ctaText || '';
            document.getElementById('hero-image-input').value = siteData.hero?.image || '';
            
            // Social media
            document.getElementById('instagram-input').value = siteData.socialMedia?.instagram || '';
            document.getElementById('facebook-input').value = siteData.socialMedia?.facebook || '';
            document.getElementById('twitter-input').value = siteData.socialMedia?.twitter || '';
            document.getElementById('linkedin-input').value = siteData.socialMedia?.linkedin || '';
            document.getElementById('website-input').value = siteData.socialMedia?.website || '';
            
            // Social media visibility toggles
            const showControls = siteData.socialMedia?.show || {};
            document.getElementById('show-instagram').checked = showControls.instagram ?? true;
            document.getElementById('show-facebook').checked = showControls.facebook ?? true;
            document.getElementById('show-twitter').checked = showControls.twitter ?? false;
            document.getElementById('show-linkedin').checked = showControls.linkedin ?? true;
            document.getElementById('show-website').checked = showControls.website ?? false;
            
            // Contact
            document.getElementById('contact-email-input').value = siteData.contact?.email || '';
            document.getElementById('contact-phone-input').value = siteData.contact?.phone || '';
            document.getElementById('contact-address-input').value = siteData.contact?.address || '';
            document.getElementById('contact-studio-input').value = siteData.contact?.studio || '';
            document.getElementById('contact-availability-input').value = siteData.contact?.availability || '';
            
            // Services
            renderServices();
            
            // Portfolio
            renderPortfolio();
            
            // Blog posts
            renderBlogPosts();
        }

        // Render services
        function renderServices() {
            const container = document.getElementById('services-container');
            container.innerHTML = '';
            
            siteData.services?.forEach((service, index) => {
                const serviceDiv = document.createElement('div');
                serviceDiv.className = 'service-item';
                serviceDiv.innerHTML = `
                    <button class="remove-btn" onclick="removeService(${index})">Eliminar</button>
                    <div class="form-group">
                        <label>T铆tulo del Servicio</label>
                        <input type="text" value="${service.title}" onchange="updateService(${index}, 'title', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Descripci贸n</label>
                        <textarea onchange="updateService(${index}, 'description', this.value)">${service.description}</textarea>
                    </div>
                `;
                container.appendChild(serviceDiv);
            });
        }

        // Render blog posts
        function renderBlogPosts() {
            const container = document.getElementById('blog-container');
            container.innerHTML = '';
            
            siteData.blogPosts?.forEach((post, index) => {
                const postDiv = document.createElement('div');
                postDiv.className = 'blog-item';
                postDiv.innerHTML = `
                    <button class="remove-btn" onclick="removeBlogPost(${index})">Eliminar</button>
                    <div class="form-group">
                        <label>T铆tulo del Post</label>
                        <input type="text" value="${post.title}" onchange="updateBlogPost(${index}, 'title', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" value="${post.date}" onchange="updateBlogPost(${index}, 'date', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Contenido</label>
                        <textarea onchange="updateBlogPost(${index}, 'content', this.value)">${post.content}</textarea>
                    </div>
                `;
                container.appendChild(postDiv);
            });
        }

        // Render portfolio
        function renderPortfolio() {
            const container = document.getElementById('portfolio-container');
            container.innerHTML = '';
            
            siteData.portfolio?.forEach((item, index) => {
                const portfolioDiv = document.createElement('div');
                portfolioDiv.className = 'portfolio-item';
                portfolioDiv.innerHTML = `
                    <button class="remove-btn" onclick="removePortfolioItem(${index})">Eliminar</button>
                    <div class="form-group">
                        <label>T铆tulo del Proyecto</label>
                        <input type="text" value="${item.title}" onchange="updatePortfolioItem(${index}, 'title', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Categor铆a</label>
                        <input type="text" value="${item.category}" onchange="updatePortfolioItem(${index}, 'category', this.value)" placeholder="Retratos, Eventos, Comercial">
                    </div>
                    <div class="form-group">
                        <label>Descripci贸n</label>
                        <textarea onchange="updatePortfolioItem(${index}, 'description', this.value)">${item.description}</textarea>
                    </div>
                    <div class="form-group">
                        <label>Imagen Principal</label>
                        <div class="image-upload-container">
                            <input type="url" value="${item.image}" onchange="updatePortfolioItem(${index}, 'image', this.value)" placeholder="https://ejemplo.com/imagen.jpg" id="portfolio-image-${index}">
                            <button type="button" class="upload-btn" onclick="uploadImage('portfolio-image-${index}', ${index}, 'image')"> Subir Imagen</button>
                            ${item.image ? `<div class="image-preview"><img src="${item.image}" alt="Preview" style="max-width: 100px; margin-top: 10px; border-radius: 4px;"></div>` : ''}
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Im谩genes de la Galer铆a</label>
                        <div class="gallery-upload-container">
                            <textarea onchange="updatePortfolioItem(${index}, 'images', this.value)" placeholder="https://ejemplo1.jpg, https://ejemplo2.jpg, ..." id="portfolio-gallery-${index}">${item.images?.join(', ') || ''}</textarea>
                            <button type="button" class="upload-btn" onclick="addGalleryImages(${index})"> Agregar Im谩genes</button>
                            ${item.images?.length ? `
                                <div class="gallery-preview">
                                    ${item.images.map(img => `<img src="${img}" alt="Preview" style="max-width: 60px; margin: 5px; border-radius: 4px;">`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                container.appendChild(portfolioDiv);
            });
        }

        // Add new service
        function addService() {
            if (!siteData.services) siteData.services = [];
            
            siteData.services.push({
                title: 'Nuevo Servicio',
                description: 'Descripci贸n del nuevo servicio'
            });
            
            renderServices();
        }

        // Remove service
        function removeService(index) {
            siteData.services.splice(index, 1);
            renderServices();
        }

        // Update service
        function updateService(index, field, value) {
            siteData.services[index][field] = value;
        }

        // Add new portfolio item
        function addPortfolioItem() {
            if (!siteData.portfolio) siteData.portfolio = [];
            
            siteData.portfolio.push({
                title: 'Nuevo Proyecto',
                category: 'Fotograf铆a',
                description: 'Descripci贸n del nuevo proyecto fotogr谩fico',
                image: 'https://images.unsplash.com/photo-1606983340126-99ab4feaa64a?w=600&h=400&fit=crop',
                images: [
                    'https://images.unsplash.com/photo-1606983340126-99ab4feaa64a?w=800&h=600&fit=crop',
                    'https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?w=800&h=600&fit=crop'
                ]
            });
            
            renderPortfolio();
        }

        // Remove portfolio item
        function removePortfolioItem(index) {
            siteData.portfolio.splice(index, 1);
            renderPortfolio();
        }

        // Update portfolio item
        function updatePortfolioItem(index, field, value) {
            if (field === 'images') {
                // Convert comma-separated string to array
                siteData.portfolio[index][field] = value.split(',').map(url => url.trim()).filter(url => url);
            } else {
                siteData.portfolio[index][field] = value;
            }
        }

        // Add new blog post
        function addBlogPost() {
            if (!siteData.blogPosts) siteData.blogPosts = [];
            
            siteData.blogPosts.push({
                title: 'Nuevo Post',
                content: 'Contenido del nuevo post',
                date: new Date().toISOString().split('T')[0]
            });
            
            renderBlogPosts();
        }

        // Remove blog post
        function removeBlogPost(index) {
            siteData.blogPosts.splice(index, 1);
            renderBlogPosts();
        }

        // Update blog post
        function updateBlogPost(index, field, value) {
            siteData.blogPosts[index][field] = value;
        }

        // Save changes
        async function saveChanges() {
            const btn = document.querySelector('.save-btn');
            btn.disabled = true;
            btn.textContent = 'Guardando...';
            
            try {
                // Update siteData from forms
                siteData.siteTitle = document.getElementById('site-title-input').value;
                
                // Update meta section for copyright
                if (!siteData.meta) siteData.meta = {};
                siteData.meta.copyright = document.getElementById('copyright-input').value;
                
                siteData.photographer = {
                    name: document.getElementById('photographer-name-input').value,
                    specialty: document.getElementById('photographer-specialty-input').value,
                    experience: document.getElementById('photographer-experience-input').value,
                    bio: document.getElementById('photographer-bio-input').value,
                    image: document.getElementById('photographer-image-input').value
                };
                
                siteData.hero = {
                    title: document.getElementById('hero-title-input').value,
                    subtitle: document.getElementById('hero-subtitle-input').value,
                    image: document.getElementById('hero-image-input').value,
                    ctaText: document.getElementById('hero-cta-input').value
                };
                
                siteData.socialMedia = {
                    show: {
                        instagram: document.getElementById('show-instagram').checked,
                        facebook: document.getElementById('show-facebook').checked,
                        twitter: document.getElementById('show-twitter').checked,
                        linkedin: document.getElementById('show-linkedin').checked,
                        website: document.getElementById('show-website').checked
                    },
                    instagram: document.getElementById('instagram-input').value,
                    facebook: document.getElementById('facebook-input').value,
                    twitter: document.getElementById('twitter-input').value,
                    linkedin: document.getElementById('linkedin-input').value,
                    website: document.getElementById('website-input').value
                };
                
                siteData.contact = {
                    email: document.getElementById('contact-email-input').value,
                    phone: document.getElementById('contact-phone-input').value,
                    address: document.getElementById('contact-address-input').value,
                    studio: document.getElementById('contact-studio-input').value,
                    availability: document.getElementById('contact-availability-input').value
                };
                
                // Send to Netlify Function
                const authToken = getAuthToken();
                const response = await fetch('/.netlify/functions/update-content', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify(siteData)
                });
                
                if (response.ok) {
                    showStatus('隆Cambios guardados exitosamente!', 'success');
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } else {
                    throw new Error('Error en la respuesta del servidor');
                }
                
            } catch (error) {
                console.error('Error saving:', error);
                showStatus('Error guardando los cambios: ' + error.message, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = ' Guardar Cambios';
            }
        }

        // Image upload functionality
        async function uploadImage(inputId, portfolioIndex, field) {
            const input = document.getElementById(inputId);
            if (input.type === 'text') return;
            
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.onchange = async (e) => {
                const file = e.target.files[0];
                if (file) {
                    try {
                        showStatus('Subiendo imagen...', 'info');
                        
                        // Convert file to base64
                        const base64 = await fileToBase64(file);
                        const fileName = generateFileName(file.name);
                        
                        // Upload to GitHub via Netlify Function
                        const authToken = getAuthToken();
                        const response = await fetch('/.netlify/functions/upload-image', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${authToken}`
                            },
                            body: JSON.stringify({
                                fileName: fileName,
                                fileContent: base64,
                                portfolioIndex: portfolioIndex,
                                field: field
                            })
                        });
                        
                        if (response.ok) {
                            const result = await response.json();
                            input.value = result.url;
                            
                            // Update the data
                            if (field === 'image') {
                                updatePortfolioItem(portfolioIndex, 'image', result.url);
                            }
                            
                            // Reload the portfolio section to show preview
                            renderPortfolio();
                            showStatus('隆Imagen subida exitosamente!', 'success');
                        } else {
                            throw new Error('Error subiendo la imagen');
                        }
                        
                    } catch (error) {
                        console.error('Error uploading image:', error);
                        showStatus('Error subiendo la imagen: ' + error.message, 'error');
                    }
                }
            };
            fileInput.click();
        }

        async function uploadPhotographerImage() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.onchange = async (e) => {
                const file = e.target.files[0];
                if (file) {
                    try {
                        showStatus('Subiendo imagen del fot贸grafo...', 'info');
                        
                        // Convert file to base64
                        const base64 = await fileToBase64(file);
                        const fileName = generateFileName(file.name);
                        
                        // Upload to GitHub via Netlify Function
                        const authToken = getAuthToken();
                        const response = await fetch('/.netlify/functions/upload-image', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${authToken}`
                            },
                            body: JSON.stringify({
                                fileName: fileName,
                                fileContent: base64,
                                folder: 'photographer'
                            })
                        });
                        
                        const result = await response.json();
                        
                        if (result.url) {
                            // Update the input with the uploaded image URL
                            document.getElementById('photographer-image-input').value = result.url;
                            
                            // Show preview in photographer image preview
                            const preview = document.getElementById('photographer-image-preview');
                            preview.innerHTML = `<img src="${result.url}" alt="Preview" style="max-width: 200px; border-radius: 4px; margin-top: 10px;">`;
                            
                            showStatus('隆Imagen del fot贸grafo subida exitosamente!', 'success');
                        } else {
                            throw new Error('Error subiendo la imagen');
                        }
                        
                    } catch (error) {
                        console.error('Error uploading photographer image:', error);
                        showStatus('Error subiendo la imagen: ' + error.message, 'error');
                    }
                }
            };
            fileInput.click();
        }

        async function addGalleryImages(portfolioIndex) {
            const textarea = document.getElementById(`portfolio-gallery-${portfolioIndex}`);
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.multiple = true;
            fileInput.onchange = async (e) => {
                const files = Array.from(e.target.files);
                if (files.length > 0) {
                    try {
                        showStatus(`Subiendo ${files.length} imagen(es)...`, 'info');
                        
                        const uploadedUrls = [];
                        
                        for (const file of files) {
                            const base64 = await fileToBase64(file);
                            const fileName = generateFileName(file.name);
                            
                            const authToken = getAuthToken();
                            const response = await fetch('/.netlify/functions/upload-image', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': `Bearer ${authToken}`
                                },
                                body: JSON.stringify({
                                    fileName: fileName,
                                    fileContent: base64
                                })
                            });
                            
                            if (response.ok) {
                                const result = await response.json();
                                uploadedUrls.push(result.url);
                            }
                        }
                        
                        // Add to existing URLs
                        const currentUrls = textarea.value.split(',').filter(url => url.trim()).map(url => url.trim());
                        const allUrls = [...currentUrls, ...uploadedUrls];
                        textarea.value = allUrls.join(', ');
                        updatePortfolioItem(portfolioIndex, 'images', textarea.value);
                        
                        // Reload the portfolio section to show previews
                        renderPortfolio();
                        showStatus('隆Im谩genes subidas exitosamente!', 'success');
                        
                    } catch (error) {
                        console.error('Error uploading gallery images:', error);
                        showStatus('Error subiendo las im谩genes: ' + error.message, 'error');
                    }
                }
            };
            fileInput.click();
        }

        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    const base64 = reader.result.split(',')[1]; // Remove data:image/jpeg;base64, prefix
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }

        function generateFileName(originalName) {
            const timestamp = Date.now();
            const random = Math.random().toString(36).substring(2);
            const extension = originalName.split('.').pop();
            return `hero/${timestamp}-${random}.${extension}`;
        }

        // Upload hero background image
        async function uploadHeroImage() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.onchange = async (e) => {
                const file = e.target.files[0];
                if (file) {
                    try {
                        showStatus('Subiendo imagen de hero...', 'info');
                        
                        // Convert file to base64
                        const base64 = await fileToBase64(file);
                        const fileName = generateFileName(file.name);
                        
                        // Upload to GitHub via Netlify Function
                        const authToken = getAuthToken();
                        const response = await fetch('/.netlify/functions/upload-image', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${authToken}`
                            },
                            body: JSON.stringify({
                                fileName: fileName,
                                fileContent: base64
                            })
                        });
                        
                        if (response.ok) {
                            const result = await response.json();
                            document.getElementById('hero-image-input').value = result.url;
                            
                            // Show preview
                            const preview = document.getElementById('hero-image-preview');
                            preview.innerHTML = `<img src="${result.url}" alt="Preview" style="max-width: 200px; border-radius: 4px; margin-top: 10px;">`;
                            
                            showStatus('隆Imagen de hero subida exitosamente!', 'success');
                        } else {
                            throw new Error('Error subiendo la imagen');
                        }
                        
                    } catch (error) {
                        console.error('Error uploading hero image:', error);
                        showStatus('Error subiendo la imagen: ' + error.message, 'error');
                    }
                }
            };
            fileInput.click();
        }

        // Show status message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status-message');
            statusDiv.textContent = message;
            statusDiv.className = `status-message ${type}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>