<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Fotograf√≠a Portfolio</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }

        .login-box h1 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .login-box p {
            margin-bottom: 30px;
            color: #666;
        }

        #admin-panel {
            display: none;
        }

        .admin-container {
            min-height: 100vh;
            background: #f5f6fa;
        }

        .admin-header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h1 {
            color: #667eea;
            font-size: 1.8rem;
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #666;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-1px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .admin-content {
            display: flex;
            height: calc(100vh - 80px);
        }

        .admin-sidebar {
            width: 250px;
            background: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .admin-nav {
            padding: 20px 0;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .nav-item:hover {
            background: #f8f9fa;
            border-left-color: #667eea;
        }

        .nav-item.active {
            background: #f0f2ff;
            border-left-color: #667eea;
            color: #667eea;
            font-weight: 600;
        }

        .admin-main {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-size: 2rem;
            color: #333;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .section-description {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .section-description h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .section-description p {
            color: #666;
            line-height: 1.6;
        }

        .dynamic-list {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 6px;
            margin-top: 15px;
        }

        .dynamic-item {
            padding: 20px;
            border-bottom: 1px solid #e1e8ed;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 20px;
            align-items: start;
        }

        .dynamic-item:last-child {
            border-bottom: none;
        }

        .dynamic-item-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .dynamic-item-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        .add-item-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .add-item-btn:hover {
            background: #229954;
            transform: translateY(-1px);
        }

        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .status-message.show {
            transform: translateX(0);
        }

        .status-message.success {
            background: #27ae60;
        }

        .status-message.error {
            background: #e74c3c;
        }

        .status-message.info {
            background: #667eea;
        }

        .image-upload-container {
            border: 2px dashed #ccc;
            border-radius: 6px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .image-upload-container:hover {
            border-color: #667eea;
        }

        .image-upload-container.dragover {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 6px;
            margin: 15px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .preview-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .preview-section h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .hero-preview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 30px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .hero-preview h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .hero-preview p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .save-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-top: 30px;
        }

        .save-section h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .save-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-btn:hover:not(:disabled) {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .save-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        @media (max-width: 768px) {
            .admin-content {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                height: auto;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .dynamic-item {
                grid-template-columns: 1fr;
            }
            
            .dynamic-item-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Login Container -->
    <div id="login-container" class="login-container">
        <div class="login-box">
            <h1>üé® Panel de Administraci√≥n</h1>
            <p>Accede con tu cuenta de GitHub para gestionar el contenido de tu portfolio de fotograf√≠a</p>
            <div data-netlify-identity-button="github" class="github-sign-in"></div>
            <button onclick="forceLogin()" class="btn btn-primary" style="margin-top: 20px;">üöÄ Iniciar Sesi√≥n</button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="admin-container">
        <div class="admin-header">
            <h1>üé® Panel de Administraci√≥n - Fotograf√≠a Portfolio</h1>
            <div class="admin-actions">
                <div class="user-info">
                    <span id="user-email"></span>
                </div>
                <button onclick="logout()" class="btn btn-danger">Cerrar Sesi√≥n</button>
            </div>
        </div>

        <div class="admin-content">
            <div class="admin-sidebar">
                <div class="admin-nav">
                    <div class="nav-item active" onclick="switchSection('general')">
                        <strong>‚öôÔ∏è Configuraci√≥n General</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('photographer')">
                        <strong>üì∑ Sobre el Fot√≥grafo</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('hero')">
                        <strong>üè† Hero Section</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('social')">
                        <strong>üåê Redes Sociales</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('services')">
                        <strong>‚ö° Servicios</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('portfolio')">
                        <strong>üé® Portfolio</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('blog')">
                        <strong>üìù Blog</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('contact')">
                        <strong>üìß Contacto</strong>
                    </div>
                    <div class="nav-item" onclick="switchSection('preview')">
                        <strong>üëÅÔ∏è Vista Previa</strong>
                    </div>
                </div>
            </div>

            <div class="admin-main">
                <!-- Configuraci√≥n General -->
                <div id="section-general" class="section active">
                    <h2 class="section-title">‚öôÔ∏è Configuraci√≥n General</h2>
                    <div class="section-description">
                        <h3>Configuraci√≥n del sitio web</h3>
                        <p>Personaliza la informaci√≥n b√°sica de tu sitio web de fotograf√≠a.</p>
                    </div>
                    <form id="general-form">
                        <div class="form-group">
                            <label for="site-title-input">T√≠tulo del Sitio</label>
                            <input type="text" id="site-title-input" placeholder="Mi Portfolio de Fotograf√≠a">
                        </div>
                        <div class="form-group">
                            <label for="site-description-input">Descripci√≥n del Sitio</label>
                            <textarea id="site-description-input" placeholder="Describe tu trabajo fotogr√°fico y estilo..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="website-input">Sitio Web</label>
                            <input type="url" id="website-input" placeholder="https://tu-sitio.com">
                        </div>
                    </form>
                </div>

                <!-- Sobre el Fot√≥grafo -->
                <div id="section-photographer" class="section">
                    <h2 class="section-title">üì∑ Sobre el Fot√≥grafo</h2>
                    <div class="section-description">
                        <h3>Informaci√≥n personal</h3>
                        <p>Comparte tu historia, experiencia y filosof√≠a como fot√≥grafo.</p>
                    </div>
                    <form id="photographer-form">
                        <div class="form-group">
                            <label for="photographer-name-input">Nombre del Fot√≥grafo</label>
                            <input type="text" id="photographer-name-input" placeholder="Tu nombre completo">
                        </div>
                        <div class="form-group">
                            <label for="photographer-bio-input">Biograf√≠a</label>
                            <textarea id="photographer-bio-input" placeholder="Tu historia como fot√≥grafo, experiencia, logros..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="photographer-experience-input">A√±os de Experiencia</label>
                            <input type="number" id="photographer-experience-input" placeholder="5" min="0">
                        </div>
                        <div class="form-group">
                            <label for="photographer-specialties-input">Especialidades</label>
                            <textarea id="photographer-specialties-input" placeholder="Boda, Retratos, Paisajes..."></textarea>
                        </div>
                    </form>
                </div>

                <!-- Hero Section -->
                <div id="section-hero" class="section">
                    <h2 class="section-title">üè† Hero Section</h2>
                    <div class="section-description">
                        <h3>P√°gina principal</h3>
                        <p>Configura el mensaje principal que ver√°n los visitantes al llegar a tu sitio.</p>
                    </div>
                    <form id="hero-form">
                        <div class="form-group">
                            <label for="hero-title-input">T√≠tulo Principal</label>
                            <input type="text" id="hero-title-input" placeholder="Capturando momentos √∫nicos">
                        </div>
                        <div class="form-group">
                            <label for="hero-subtitle-input">Subt√≠tulo</label>
                            <input type="text" id="hero-subtitle-input" placeholder="Fotograf√≠a profesional con pasi√≥n">
                        </div>
                        <div class="form-group">
                            <label for="hero-description-input">Descripci√≥n</label>
                            <textarea id="hero-description-input" placeholder="M√°s texto descriptivo sobre tu trabajo..."></textarea>
                        </div>
                    </form>
                </div>

                <!-- Redes Sociales -->
                <div id="section-social" class="section">
                    <h2 class="section-title">üåê Redes Sociales</h2>
                    <div class="section-description">
                        <h3>Conecta con tus redes</h3>
                        <p>Comparte los enlaces a tus perfiles en redes sociales.</p>
                    </div>
                    <form id="social-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="instagram-input">Instagram</label>
                                <input type="url" id="instagram-input" placeholder="https://instagram.com/tu-perfil">
                            </div>
                            <div class="form-group">
                                <label for="facebook-input">Facebook</label>
                                <input type="url" id="facebook-input" placeholder="https://facebook.com/tu-p√°gina">
                            </div>
                            <div class="form-group">
                                <label for="twitter-input">Twitter</label>
                                <input type="url" id="twitter-input" placeholder="https://twitter.com/tu-perfil">
                            </div>
                            <div class="form-group">
                                <label for="linkedin-input">LinkedIn</label>
                                <input type="url" id="linkedin-input" placeholder="https://linkedin.com/in/tu-perfil">
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Servicios -->
                <div id="section-services" class="section">
                    <h2 class="section-title">‚ö° Servicios</h2>
                    <div class="section-description">
                        <h3>Servicios fotogr√°ficos</h3>
                        <p>Lista los servicios que ofreces con sus descripciones y precios.</p>
                    </div>
                    <div id="services-list" class="dynamic-list">
                        <!-- Servicios se cargar√°n din√°micamente -->
                    </div>
                    <button onclick="addService()" class="add-item-btn">‚ûï A√±adir Servicio</button>
                </div>

                <!-- Portfolio -->
                <div id="section-portfolio" class="section">
                    <h2 class="section-title">üé® Portfolio</h2>
                    <div class="section-description">
                        <h3>Trabajos destacados</h3>
                        <p>Muestra tus mejores fotograf√≠as organizadas por categor√≠as.</p>
                    </div>
                    <div id="portfolio-list" class="dynamic-list">
                        <!-- Portfolio se cargar√° din√°micamente -->
                    </div>
                    <button onclick="addPortfolioItem()" class="add-item-btn">‚ûï A√±adir Trabajo</button>
                </div>

                <!-- Blog -->
                <div id="section-blog" class="section">
                    <h2 class="section-title">üìù Blog</h2>
                    <div class="section-description">
                        <h3>Art√≠culos y noticias</h3>
                        <p>Comparte historias, consejos y noticias sobre fotograf√≠a.</p>
                    </div>
                    <div id="blog-list" class="dynamic-list">
                        <!-- Blog se cargar√° din√°micamente -->
                    </div>
                    <button onclick="addBlogPost()" class="add-item-btn">‚ûï A√±adir Art√≠culo</button>
                </div>

                <!-- Contacto -->
                <div id="section-contact" class="section">
                    <h2 class="section-title">üìß Contacto</h2>
                    <div class="section-description">
                        <h3>Informaci√≥n de contacto</h3>
                        <p>Proporciona formas para que los clientes puedan contactarte.</p>
                    </div>
                    <form id="contact-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="contact-email-input">Email</label>
                                <input type="email" id="contact-email-input" placeholder="tu@email.com">
                            </div>
                            <div class="form-group">
                                <label for="contact-phone-input">Tel√©fono</label>
                                <input type="tel" id="contact-phone-input" placeholder="+34 123 456 789">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-address-input">Direcci√≥n</label>
                            <input type="text" id="contact-address-input" placeholder="Tu direcci√≥n">
                        </div>
                        <div class="form-group">
                            <label for="contact-studio-input">Estudio</label>
                            <input type="text" id="contact-studio-input" placeholder="Nombre del estudio (opcional)">
                        </div>
                        <div class="form-group">
                            <label for="contact-availability-input">Disponibilidad</label>
                            <textarea id="contact-availability-input" placeholder="Horarios, disponibilidad para eventos..."></textarea>
                        </div>
                    </form>
                </div>

                <!-- Vista Previa -->
                <div id="section-preview" class="section">
                    <h2 class="section-title">üëÅÔ∏è Vista Previa</h2>
                    <div class="section-description">
                        <h3>Previsualizaci√≥n en tiempo real</h3>
                        <p>Ve c√≥mo se ver√° tu sitio con los cambios actuales antes de guardarlos.</p>
                    </div>

                    <div class="preview-section">
                        <h3>üè† Hero Section</h3>
                        <div class="hero-preview">
                            <h1 id="preview-hero-title">T√≠tulo Principal</h1>
                            <p id="preview-hero-subtitle">Subt√≠tulo</p>
                        </div>
                    </div>

                    <div class="preview-section">
                        <h3>üì∑ Sobre el Fot√≥grafo</h3>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 6px;">
                            <h4 id="preview-photographer-name">Nombre del Fot√≥grafo</h4>
                            <p id="preview-photographer-bio">Biograf√≠a del fot√≥grafo...</p>
                            <p><strong>Experiencia:</strong> <span id="preview-photographer-experience">0</span> a√±os</p>
                            <p><strong>Especialidades:</strong> <span id="preview-photographer-specialties">Especialidades</span></p>
                        </div>
                    </div>

                    <div class="preview-section">
                        <h3>üìä Resumen del Sitio</h3>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 6px;">
                            <p><strong>T√≠tulo:</strong> <span id="preview-site-title">Mi Portfolio de Fotograf√≠a</span></p>
                            <p><strong>Descripci√≥n:</strong> <span id="preview-site-description">Descripci√≥n del sitio...</span></p>
                            <p><strong>Email:</strong> <span id="preview-contact-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1e6a6b5e7b737f7772307d7173">[email&#160;protected]</a></span></p>
                            <p><strong>Servicios:</strong> <span id="preview-services-count">0</span></p>
                            <p><strong>Trabajos:</strong> <span id="preview-portfolio-count">0</span></p>
                            <p><strong>Art√≠culos:</strong> <span id="preview-blog-count">0</span></p>
                        </div>
                    </div>

                    <div class="save-section">
                        <h3>üíæ Guardar Cambios</h3>
                        <p>Haz clic en el bot√≥n para guardar todos los cambios en tu sitio web.</p>
                        <button id="save-btn" onclick="saveChanges()" class="save-btn">üíæ Guardar Cambios</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Message -->
    <div id="status-message" class="status-message"></div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Variables globales
        let currentUser = null;
        let isInitialized = false;
        let siteData = {};

        // Funci√≥n para forzar login
        function forceLogin() {
            if (netlifyIdentity) {
                netlifyIdentity.open();
            } else {
                console.error('Netlify Identity no est√° disponible');
            }
        }

        // Funci√≥n para logout
        function logout() {
            if (netlifyIdentity) {
                netlifyIdentity.logout();
            }
        }

        // Funci√≥n para mostrar/ocultar secciones
        function switchSection(sectionName) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar secci√≥n seleccionada
            document.getElementById(`section-${sectionName}`).classList.add('active');
            
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            // Actualizar vista previa si es necesario
            if (sectionName === 'preview') {
                updatePreview();
            }
        }

        // Funci√≥n para a√±adir un servicio
        function addService() {
            const container = document.getElementById('services-list');
            const serviceId = Date.now();
            const serviceHTML = `
                <div class="dynamic-item" data-service-id="${serviceId}">
                    <div class="dynamic-item-content">
                        <div class="form-group">
                            <label>Nombre del Servicio</label>
                            <input type="text" id="service-name-${serviceId}" placeholder="Fotograf√≠a de Bodas">
                        </div>
                        <div class="form-group">
                            <label>Precio</label>
                            <input type="text" id="service-price-${serviceId}" placeholder="Desde ‚Ç¨500">
                        </div>
                    </div>
                    <div class="dynamic-item-content">
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label>Descripci√≥n</label>
                            <textarea id="service-description-${serviceId}" placeholder="Descripci√≥n detallada del servicio..."></textarea>
                        </div>
                    </div>
                    <div class="dynamic-item-actions">
                        <button onclick="removeService(${serviceId})" class="btn btn-danger btn-small">Eliminar</button>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', serviceHTML);
        }

        // Funci√≥n para eliminar un servicio
        function removeService(serviceId) {
            const element = document.querySelector(`[data-service-id="${serviceId}"]`);
            if (element) {
                element.remove();
            }
        }

        // Funci√≥n para a√±adir un trabajo de portfolio
        function addPortfolioItem() {
            const container = document.getElementById('portfolio-list');
            const portfolioId = Date.now();
            const portfolioHTML = `
                <div class="dynamic-item" data-portfolio-id="${portfolioId}">
                    <div class="dynamic-item-content">
                        <div class="form-group">
                            <label>T√≠tulo</label>
                            <input type="text" id="portfolio-title-${portfolioId}" placeholder="Sesi√≥n de fotos en la playa">
                        </div>
                        <div class="form-group">
                            <label>Categor√≠a</label>
                            <select id="portfolio-category-${portfolioId}">
                                <option value="">Seleccionar categor√≠a</option>
                                <option value="boda">Boda</option>
                                <option value="retrato">Retrato</option>
                                <option value="paisaje">Paisaje</option>
                                <option value="evento">Evento</option>
                                <option value="producto">Producto</option>
                            </select>
                        </div>
                    </div>
                    <div class="dynamic-item-content">
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label>Descripci√≥n</label>
                            <textarea id="portfolio-description-${portfolioId}" placeholder="Describe el proyecto y la experiencia..."></textarea>
                        </div>
                    </div>
                    <div class="dynamic-item-content">
                        <div class="form-group">
                            <label>URL de la Imagen</label>
                            <input type="url" id="portfolio-image-${portfolioId}" placeholder="https://ejemplo.com/imagen.jpg">
                        </div>
                        <div class="form-group">
                            <label>Cliente</label>
                            <input type="text" id="portfolio-client-${portfolioId}" placeholder="Nombre del cliente (opcional)">
                        </div>
                    </div>
                    <div class="dynamic-item-actions">
                        <button onclick="removePortfolioItem(${portfolioId})" class="btn btn-danger btn-small">Eliminar</button>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', portfolioHTML);
        }

        // Funci√≥n para eliminar un trabajo de portfolio
        function removePortfolioItem(portfolioId) {
            const element = document.querySelector(`[data-portfolio-id="${portfolioId}"]`);
            if (element) {
                element.remove();
            }
        }

        // Funci√≥n para a√±adir un art√≠culo de blog
        function addBlogPost() {
            const container = document.getElementById('blog-list');
            const blogId = Date.now();
            const blogHTML = `
                <div class="dynamic-item" data-blog-id="${blogId}">
                    <div class="dynamic-item-content">
                        <div class="form-group">
                            <label>T√≠tulo del Art√≠culo</label>
                            <input type="text" id="blog-title-${blogId}" placeholder="Consejos para fotograf√≠a de retratos">
                        </div>
                        <div class="form-group">
                            <label>Autor</label>
                            <input type="text" id="blog-author-${blogId}" placeholder="Tu nombre">
                        </div>
                    </div>
                    <div class="dynamic-item-content">
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label>Contenido</label>
                            <textarea id="blog-content-${blogId}" placeholder="Escribe tu art√≠culo aqu√≠..." style="min-height: 150px;"></textarea>
                        </div>
                    </div>
                    <div class="dynamic-item-content">
                        <div class="form-group">
                            <label>Fecha de Publicaci√≥n</label>
                            <input type="date" id="blog-date-${blogId}">
                        </div>
                        <div class="form-group">
                            <label>Categor√≠a</label>
                            <select id="blog-category-${blogId}">
                                <option value="">Seleccionar categor√≠a</option>
                                <option value="consejos">Consejos</option>
                                <option value="tutorial">Tutorial</option>
                                <option value="noticias">Noticias</option>
                                <option value="historias">Historias</option>
                            </select>
                        </div>
                    </div>
                    <div class="dynamic-item-actions">
                        <button onclick="removeBlogPost(${blogId})" class="btn btn-danger btn-small">Eliminar</button>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', blogHTML);
        }

        // Funci√≥n para eliminar un art√≠culo de blog
        function removeBlogPost(blogId) {
            const element = document.querySelector(`[data-blog-id="${blogId}"]`);
            if (element) {
                element.remove();
            }
        }

        // Funci√≥n para mostrar mensajes de estado
        function showStatus(message, type = 'info') {
            const statusElement = document.getElementById('status-message');
            statusElement.textContent = message;
            statusElement.className = `status-message ${type} show`;
            
            setTimeout(() => {
                statusElement.classList.remove('show');
            }, 5000);
        }

        // Funci√≥n para actualizar vista previa
        function updatePreview() {
            // Actualizar hero
            document.getElementById('preview-hero-title').textContent = 
                document.getElementById('hero-title-input').value || 'T√≠tulo Principal';
            document.getElementById('preview-hero-subtitle').textContent = 
                document.getElementById('hero-subtitle-input').value || 'Subt√≠tulo';

            // Actualizar fot√≥grafo
            document.getElementById('preview-photographer-name').textContent = 
                document.getElementById('photographer-name-input').value || 'Nombre del Fot√≥grafo';
            document.getElementById('preview-photographer-bio').textContent = 
                document.getElementById('photographer-bio-input').value || 'Biograf√≠a del fot√≥grafo...';
            document.getElementById('preview-photographer-experience').textContent = 
                document.getElementById('photographer-experience-input').value || '0';
            document.getElementById('preview-photographer-specialties').textContent = 
                document.getElementById('photographer-specialties-input').value || 'Especialidades';

            // Actualizar informaci√≥n general
            document.getElementById('preview-site-title').textContent = 
                document.getElementById('site-title-input').value || 'Mi Portfolio de Fotograf√≠a';
            document.getElementById('preview-site-description').textContent = 
                document.getElementById('site-description-input').value || 'Descripci√≥n del sitio...';

            // Actualizar contacto
            document.getElementById('preview-contact-email').textContent = 
                document.getElementById('contact-email-input').value || 'tu@email.com';

            // Contar elementos din√°micos
            const serviceItems = document.querySelectorAll('[data-service-id]').length;
            const portfolioItems = document.querySelectorAll('[data-portfolio-id]').length;
            const blogItems = document.querySelectorAll('[data-blog-id]').length;

            document.getElementById('preview-services-count').textContent = serviceItems;
            document.getElementById('preview-portfolio-count').textContent = portfolioItems;
            document.getElementById('preview-blog-count').textContent = blogItems;
        }

        // Funci√≥n para recoger datos del formulario
        function collectFormData() {
            // Servicios
            const services = [];
            document.querySelectorAll('[data-service-id]').forEach(item => {
                const serviceId = item.dataset.serviceId;
                const name = document.getElementById(`service-name-${serviceId}`)?.value || '';
                const price = document.getElementById(`service-price-${serviceId}`)?.value || '';
                const description = document.getElementById(`service-description-${serviceId}`)?.value || '';
                
                if (name.trim()) {
                    services.push({ name, price, description });
                }
            });

            // Portfolio
            const portfolio = [];
            document.querySelectorAll('[data-portfolio-id]').forEach(item => {
                const portfolioId = item.dataset.portfolioId;
                const title = document.getElementById(`portfolio-title-${portfolioId}`)?.value || '';
                const category = document.getElementById(`portfolio-category-${portfolioId}`)?.value || '';
                const description = document.getElementById(`portfolio-description-${portfolioId}`)?.value || '';
                const image = document.getElementById(`portfolio-image-${portfolioId}`)?.value || '';
                const client = document.getElementById(`portfolio-client-${portfolioId}`)?.value || '';
                
                if (title.trim()) {
                    portfolio.push({ title, category, description, image, client });
                }
            });

            // Blog
            const blog = [];
            document.querySelectorAll('[data-blog-id]').forEach(item => {
                const blogId = item.dataset.blogId;
                const title = document.getElementById(`blog-title-${blogId}`)?.value || '';
                const author = document.getElementById(`blog-author-${blogId}`)?.value || '';
                const content = document.getElementById(`blog-content-${blogId}`)?.value || '';
                const date = document.getElementById(`blog-date-${blogId}`)?.value || '';
                const category = document.getElementById(`blog-category-${blogId}`)?.value || '';
                
                if (title.trim()) {
                    blog.push({ title, author, content, date, category });
                }
            });

            return {
                site: {
                    title: document.getElementById('site-title-input').value || '',
                    description: document.getElementById('site-description-input').value || '',
                    website: document.getElementById('website-input').value || ''
                },
                photographer: {
                    name: document.getElementById('photographer-name-input').value || '',
                    bio: document.getElementById('photographer-bio-input').value || '',
                    experience: document.getElementById('photographer-experience-input').value || '',
                    specialties: document.getElementById('photographer-specialties-input').value || ''
                },
                hero: {
                    title: document.getElementById('hero-title-input').value || '',
                    subtitle: document.getElementById('hero-subtitle-input').value || '',
                    description: document.getElementById('hero-description-input').value || ''
                },
                social: {
                    instagram: document.getElementById('instagram-input').value || '',
                    facebook: document.getElementById('facebook-input').value || '',
                    twitter: document.getElementById('twitter-input').value || '',
                    linkedin: document.getElementById('linkedin-input').value || ''
                },
                services: services,
                portfolio: portfolio,
                blog: blog,
                contact: {
                    email: document.getElementById('contact-email-input').value || '',
                    phone: document.getElementById('contact-phone-input').value || '',
                    address: document.getElementById('contact-address-input').value || '',
                    studio: document.getElementById('contact-studio-input').value || '',
                    availability: document.getElementById('contact-availability-input').value || ''
                }
            };
        }

        // Funci√≥n para cargar datos en los formularios
        function loadFormData(data) {
            // Datos generales
            document.getElementById('site-title-input').value = data.site?.title || '';
            document.getElementById('site-description-input').value = data.site?.description || '';
            document.getElementById('website-input').value = data.site?.website || '';

            // Fot√≥grafo
            document.getElementById('photographer-name-input').value = data.photographer?.name || '';
            document.getElementById('photographer-bio-input').value = data.photographer?.bio || '';
            document.getElementById('photographer-experience-input').value = data.photographer?.experience || '';
            document.getElementById('photographer-specialties-input').value = data.photographer?.specialties || '';

            // Hero
            document.getElementById('hero-title-input').value = data.hero?.title || '';
            document.getElementById('hero-subtitle-input').value = data.hero?.subtitle || '';
            document.getElementById('hero-description-input').value = data.hero?.description || '';

            // Social
            document.getElementById('instagram-input').value = data.social?.instagram || '';
            document.getElementById('facebook-input').value = data.social?.facebook || '';
            document.getElementById('twitter-input').value = data.social?.twitter || '';
            document.getElementById('linkedin-input').value = data.social?.linkedin || '';

            // Contacto
            document.getElementById('contact-email-input').value = data.contact?.email || '';
            document.getElementById('contact-phone-input').value = data.contact?.phone || '';
            document.getElementById('contact-address-input').value = data.contact?.address || '';
            document.getElementById('contact-studio-input').value = data.contact?.studio || '';
            document.getElementById('contact-availability-input').value = data.contact?.availability || '';

            // Servicios
            const servicesContainer = document.getElementById('services-list');
            servicesContainer.innerHTML = '';
            if (data.services && Array.isArray(data.services)) {
                data.services.forEach(service => {
                    const serviceId = Date.now() + Math.random();
                    const serviceHTML = `
                        <div class="dynamic-item" data-service-id="${serviceId}">
                            <div class="dynamic-item-content">
                                <div class="form-group">
                                    <label>Nombre del Servicio</label>
                                    <input type="text" id="service-name-${serviceId}" value="${service.name || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Precio</label>
                                    <input type="text" id="service-price-${serviceId}" value="${service.price || ''}">
                                </div>
                            </div>
                            <div class="dynamic-item-content">
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label>Descripci√≥n</label>
                                    <textarea id="service-description-${serviceId}">${service.description || ''}</textarea>
                                </div>
                            </div>
                            <div class="dynamic-item-actions">
                                <button onclick="removeService(${serviceId})" class="btn btn-danger btn-small">Eliminar</button>
                            </div>
                        </div>
                    `;
                    servicesContainer.insertAdjacentHTML('beforeend', serviceHTML);
                });
            }

            // Portfolio
            const portfolioContainer = document.getElementById('portfolio-list');
            portfolioContainer.innerHTML = '';
            if (data.portfolio && Array.isArray(data.portfolio)) {
                data.portfolio.forEach(item => {
                    const portfolioId = Date.now() + Math.random();
                    const portfolioHTML = `
                        <div class="dynamic-item" data-portfolio-id="${portfolioId}">
                            <div class="dynamic-item-content">
                                <div class="form-group">
                                    <label>T√≠tulo</label>
                                    <input type="text" id="portfolio-title-${portfolioId}" value="${item.title || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Categor√≠a</label>
                                    <select id="portfolio-category-${portfolioId}">
                                        <option value="">Seleccionar categor√≠a</option>
                                        <option value="boda" ${item.category === 'boda' ? 'selected' : ''}>Boda</option>
                                        <option value="retrato" ${item.category === 'retrato' ? 'selected' : ''}>Retrato</option>
                                        <option value="paisaje" ${item.category === 'paisaje' ? 'selected' : ''}>Paisaje</option>
                                        <option value="evento" ${item.category === 'evento' ? 'selected' : ''}>Evento</option>
                                        <option value="producto" ${item.category === 'producto' ? 'selected' : ''}>Producto</option>
                                    </select>
                                </div>
                            </div>
                            <div class="dynamic-item-content">
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label>Descripci√≥n</label>
                                    <textarea id="portfolio-description-${portfolioId}">${item.description || ''}</textarea>
                                </div>
                            </div>
                            <div class="dynamic-item-content">
                                <div class="form-group">
                                    <label>URL de la Imagen</label>
                                    <input type="url" id="portfolio-image-${portfolioId}" value="${item.image || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Cliente</label>
                                    <input type="text" id="portfolio-client-${portfolioId}" value="${item.client || ''}">
                                </div>
                            </div>
                            <div class="dynamic-item-actions">
                                <button onclick="removePortfolioItem(${portfolioId})" class="btn btn-danger btn-small">Eliminar</button>
                            </div>
                        </div>
                    `;
                    portfolioContainer.insertAdjacentHTML('beforeend', portfolioHTML);
                });
            }

            // Blog
            const blogContainer = document.getElementById('blog-list');
            blogContainer.innerHTML = '';
            if (data.blog && Array.isArray(data.blog)) {
                data.blog.forEach(post => {
                    const blogId = Date.now() + Math.random();
                    const blogHTML = `
                        <div class="dynamic-item" data-blog-id="${blogId}">
                            <div class="dynamic-item-content">
                                <div class="form-group">
                                    <label>T√≠tulo del Art√≠culo</label>
                                    <input type="text" id="blog-title-${blogId}" value="${post.title || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Autor</label>
                                    <input type="text" id="blog-author-${blogId}" value="${post.author || ''}">
                                </div>
                            </div>
                            <div class="dynamic-item-content">
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label>Contenido</label>
                                    <textarea id="blog-content-${blogId}" style="min-height: 150px;">${post.content || ''}</textarea>
                                </div>
                            </div>
                            <div class="dynamic-item-content">
                                <div class="form-group">
                                    <label>Fecha de Publicaci√≥n</label>
                                    <input type="date" id="blog-date-${blogId}" value="${post.date || ''}">
                                </div>
                                <div class="form-group">
                                    <label>Categor√≠a</label>
                                    <select id="blog-category-${blogId}">
                                        <option value="">Seleccionar categor√≠a</option>
                                        <option value="consejos" ${post.category === 'consejos' ? 'selected' : ''}>Consejos</option>
                                        <option value="tutorial" ${post.category === 'tutorial' ? 'selected' : ''}>Tutorial</option>
                                        <option value="noticias" ${post.category === 'noticias' ? 'selected' : ''}>Noticias</option>
                                        <option value="historias" ${post.category === 'historias' ? 'selected' : ''}>Historias</option>
                                    </select>
                                </div>
                            </div>
                            <div class="dynamic-item-actions">
                                <button onclick="removeBlogPost(${blogId})" class="btn btn-danger btn-small">Eliminar</button>
                            </div>
                        </div>
                    `;
                    blogContainer.insertAdjacentHTML('beforeend', blogHTML);
                });
            }

            // Actualizar vista previa
            updatePreview();
        }

        // Funci√≥n mejorada para obtener el token JWT
        function getJWTToken(user) {
            console.log('üîç Analizando token del usuario...', user);
            
            if (!user) {
                console.log('‚ùå No hay usuario logueado');
                return null;
            }

            // Intentar m√∫ltiples formas de obtener el token
            let token = null;

            // M√©todo 1: token.access_token (m√°s com√∫n)
            if (user.token && user.token.access_token) {
                token = user.token.access_token;
                console.log('‚úÖ Token obtenido de user.token.access_token');
            }
            // M√©todo 2: jwt directo
            else if (user.jwt) {
                token = user.jwt;
                console.log('‚úÖ Token obtenido de user.jwt');
            }
            // M√©todo 3: token.token (alternativa)
            else if (user.token && user.token.token) {
                token = user.token.token;
                console.log('‚úÖ Token obtenido de user.token.token');
            }
            // M√©todo 4: access_token directo
            else if (user.access_token) {
                token = user.access_token;
                console.log('‚úÖ Token obtenido de user.access_token');
            }
            // M√©todo 5: Obtener del localStorage
            else {
                // Buscar tokens en localStorage
                const identityData = localStorage.getItem('netlify-identity.user');
                if (identityData) {
                    try {
                        const parsed = JSON.parse(identityData);
                        if (parsed.token && parsed.token.access_token) {
                            token = parsed.token.access_token;
                            console.log('‚úÖ Token obtenido de localStorage');
                        }
                    } catch (e) {
                        console.log('‚ùå Error parseando localStorage:', e);
                    }
                }
            }

            if (token) {
                console.log('üîë Token encontrado. Longitud:', token.length);
                console.log('üîë Token (primeros 50 caracteres):', token.substring(0, 50) + '...');
                return token;
            } else {
                console.log('‚ùå No se pudo obtener el token');
                console.log('üìã Propiedades del usuario:', Object.keys(user));
                return null;
            }
        }

        // Funci√≥n para guardar cambios (MEJORADA)
        async function saveChanges() {
            const saveBtn = document.getElementById('save-btn');
            saveBtn.disabled = true;
            saveBtn.textContent = '‚è≥ Guardando...';
            
            try {
                console.log('üíæ Iniciando proceso de guardado...');
                
                // Recoger datos del formulario
                const formData = collectFormData();
                console.log('üìã Datos recopilados:', Object.keys(formData));
                
                // Obtener token con mejor logging
                const token = getJWTToken(currentUser);
                
                if (!token) {
                    throw new Error('No se pudo obtener el token de autenticaci√≥n. Intenta cerrar sesi√≥n y volver a iniciar sesi√≥n.');
                }
                
                console.log('üöÄ Enviando solicitud a Netlify Function...');
                
                // Enviar a Netlify Function con mejor manejo de errores
                const response = await fetch('/.netlify/functions/update-content', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ siteData: formData })
                });
                
                console.log('üì° Respuesta recibida:', {
                    status: response.status,
                    statusText: response.statusText,
                    headers: Object.fromEntries(response.headers.entries())
                });
                
                // Parsear respuesta
                const result = await response.json();
                console.log('üì¶ Datos de respuesta:', result);
                
                if (!response.ok) {
                    // Manejar errores espec√≠ficos
                    if (response.status === 401) {
                        throw new Error('Token de autorizaci√≥n inv√°lido o expirado. Cierra sesi√≥n y vuelve a iniciar sesi√≥n.');
                    } else if (response.status === 403) {
                        throw new Error('No tienes permisos para modificar el repositorio.');
                    } else if (response.status === 404) {
                        throw new Error('El endpoint de guardado no est√° disponible. Verifica la configuraci√≥n de Netlify.');
                    } else {
                        throw new Error(result.error || `Error del servidor: ${response.status} - ${response.statusText}`);
                    }
                }
                
                // √âxito
                console.log('‚úÖ Guardado exitoso:', result);
                showStatus('¬°Cambios guardados exitosamente en GitHub!', 'success');
                
                // Actualizar datos locales
                siteData = { ...siteData, ...formData };
                
                // Actualizar vista previa
                updatePreview();
                
            } catch (error) {
                console.error('‚ùå Error detallado al guardar:', error);
                
                // Mostrar mensaje de error m√°s detallado
                let errorMessage = 'Error desconocido al guardar.';
                
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    errorMessage = 'Error de conexi√≥n. Verifica tu conexi√≥n a internet y que el sitio est√© funcionando.';
                } else if (error.message.includes('401')) {
                    errorMessage = 'Error de autenticaci√≥n. Cierra sesi√≥n y vuelve a iniciar sesi√≥n.';
                } else if (error.message.includes('403')) {
                    errorMessage = 'Sin permisos. Verifica que el token tenga acceso al repositorio.';
                } else if (error.message.includes('404')) {
                    errorMessage = 'Endpoint no encontrado. Verifica la configuraci√≥n de Netlify Functions.';
                } else {
                    errorMessage = error.message;
                }
                
                showStatus(`‚ùå ${errorMessage}`, 'error');
            } finally {
                // Rehabilitar bot√≥n
                saveBtn.disabled = false;
                saveBtn.textContent = 'üíæ Guardar Cambios';
            }
        }

        // Funci√≥n para cargar datos del sitio
        async function loadSiteData() {
            try {
                console.log('üìä Cargando datos del sitio...');
                const response = await fetch('/data.json');
                if (response.ok) {
                    siteData = await response.json();
                    loadFormData(siteData);
                    console.log('‚úÖ Datos cargados exitosamente');
                } else {
                    console.warn('‚ö†Ô∏è No se pudo cargar data.json, usando valores por defecto');
                    loadFormData({});
                }
            } catch (error) {
                console.error('‚ùå Error cargando datos:', error);
                loadFormData({});
            }
        }

        // Funciones de debug (SOLO PARA DESARROLLO)
        window.debugAdmin = {
            init: () => {
                console.log('üöÄ Admin Panel Completo cargado correctamente. Funciones disponibles:');
                console.log('   - debugAdmin.init()');
                console.log('   - debugAdmin.login()');
                console.log('   - debugAdmin.logout()');
                console.log('   - debugAdmin.switchSection("section")');
                console.log('   - debugAdmin.checkIdentity()');
                console.log('   - debugAdmin.reloadData()');
                console.log('   - debugAdmin.testSave() - Para probar guardado');
                console.log('   - debugAdmin.reset()');
                console.log('');
                console.log('üìã Secciones disponibles:');
                console.log('   - Configuraci√≥n General');
                console.log('   - Sobre el Fot√≥grafo');
                console.log('   - Hero Section');
                console.log('   - Redes Sociales');
                console.log('   - Servicios');
                console.log('   - Portfolio');
                console.log('   - Blog');
                console.log('   - Contacto');
                console.log('   - Vista Previa');
                console.log('');
                console.log('üöÄ Funci√≥n saveChanges() mejorada con mejor autenticaci√≥n');
            },
            
            login: () => forceLogin(),
            
            logout: () => logout(),
            
            switchSection: (section) => {
                const navItem = document.querySelector(`[onclick="switchSection('${section}')"]`);
                if (navItem) navItem.click();
            },
            
            checkIdentity: () => {
                console.log('üîç Estado de Netlify Identity:');
                console.log('- Usuario actual:', currentUser);
                console.log('- Inicializado:', isInitialized);
                if (currentUser) {
                    console.log('- Token disponible:', !!getJWTToken(currentUser));
                }
            },
            
            reloadData: () => loadSiteData(),
            
            testSave: async () => {
                console.log('üß™ Probando funci√≥n de guardado...');
                await saveChanges();
            },
            
            reset: () => {
                localStorage.clear();
                sessionStorage.clear();
                location.reload();
            }
        };

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando Admin Panel Completo...');
            
            if (typeof netlifyIdentity !== 'undefined') {
                console.log('‚úÖ Netlify Identity disponible');
                
                // Evento de login
                netlifyIdentity.on('login', function(user) {
                    console.log('üîê Usuario logueado:', user.email);
                    currentUser = user;
                    document.getElementById('login-container').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    document.getElementById('user-email').textContent = user.email;
                    
                    if (!isInitialized) {
                        console.log('üîÑ Inicializando panel de administraci√≥n...');
                        loadSiteData();
                        isInitialized = true;
                    }
                });

                // Evento de logout
                netlifyIdentity.on('logout', function() {
                    console.log('üö™ Usuario deslogueado');
                    currentUser = null;
                    isInitialized = false;
                    document.getElementById('login-container').style.display = 'flex';
                    document.getElementById('admin-panel').style.display = 'none';
                });

                // Verificar si ya hay un usuario logueado
                netlifyIdentity.on('init', function(user) {
                    console.log('üîß Netlify Identity inicializado:', user ? 'Usuario autenticado' : 'No autenticado');
                    
                    if (user) {
                        console.log('üîì Mostrando panel de administraci√≥n para:', user.email);
                        currentUser = user;
                        document.getElementById('login-container').style.display = 'none';
                        document.getElementById('admin-panel').style.display = 'block';
                        document.getElementById('user-email').textContent = user.email;
                        
                        if (!isInitialized) {
                            loadSiteData();
                            isInitialized = true;
                        }
                    }
                });
            } else {
                console.error('‚ùå Netlify Identity no est√° disponible');
            }
        });

        console.log('‚úÖ Admin Panel Completo cargado correctamente. Funciones disponibles:');
        console.log('   - debugAdmin.init()');
        console.log('   - debugAdmin.login()');
        console.log('   - debugAdmin.logout()');
        console.log('   - debugAdmin.switchSection("section")');
        console.log('   - debugAdmin.checkIdentity()');
        console.log('   - debugAdmin.reloadData()');
        console.log('   - debugAdmin.testSave() - Para probar guardado');
        console.log('   - debugAdmin.reset()');
        console.log('');
        console.log('üìã Secciones disponibles:');
        console.log('   - Configuraci√≥n General');
        console.log('   - Sobre el Fot√≥grafo');
        console.log('   - Hero Section');
        console.log('   - Redes Sociales');
        console.log('   - Servicios');
        console.log('   - Portfolio');
        console.log('   - Blog');
        console.log('   - Contacto');
        console.log('   - Vista Previa');
        console.log('');
        console.log('üöÄ Funci√≥n saveChanges() mejorada con mejor autenticaci√≥n');
    </script>
</body>
</html>
